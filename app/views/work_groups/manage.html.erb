<% provide(:title, "WorkGroup Managment") %>
<br/>
<h1 class="text-center"><%= @workGroup.name %> Managment</h1>
<br/>

<div class="row">
  <div class="col-md-4 col-md-offset-4">
    <div class="panel">
      <table class="table table-hover text-center">
        <tr>
          <th class="text-center">Users</th>
        </tr>
        <%#Show in a table the users%>
        <% @workGroup.users.each do |user| %>
          <tr>
            <td><%= link_to user.email, user_path(user) %></td>
            <td>
              <%# If the user is the manager i cant delete him%>
              <% unless user.has_role? :manager %>
                <%= form_tag remove_user_path do %>
                  <%= hidden_field_tag "user_id", user.id %>
                  <%= submit_tag "Remove" %>
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </table>
    </div>
    <div class="text-center">
      <p>
        <%# Form for adding users %>
        <%= form_tag add_user_path do %>
          <%= text_field_tag :email %>
          <%= submit_tag "Add" %>
        <% end %>
    </p>
    </div>
    <div class="text-center">
      <% if policy(@workGroup).destroy? %>
        <%= link_to 'Delete group', work_group_path(@workGroup), method: :delete,
         class: "btn btn-primary btn-lg" %>
      <% end %>
    </div>
  </div>
</div>
